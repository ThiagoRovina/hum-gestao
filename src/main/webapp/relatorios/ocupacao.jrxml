<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="RelatorioOcupacao" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="12345678-1234-1234-1234-123456789012">
    <queryString>
        <![CDATA[
        SELECT 
            l.ID_LEITO, 
            un.NM_UNIDADE, 
            h.NM_HOSPITAL,
            CASE 
                WHEN l.FL_ATIVO = 1 THEN 'Ativo' 
                ELSE 'Inativo' 
            END as STATUS
        FROM 
            MCI.MCI_LEITO l
            INNER JOIN MCI.MCI_QUARTO q ON q.CD_QUARTO = l.CD_QUARTO
            INNER JOIN MCI.MCI_UNIDADE_HOSPITALAR un ON un.CD_UNIDADE_HOSPITALAR = q.CD_UNIDADE_HOSPITALAR
            INNER JOIN MCI.MCI_HOSPITAL h ON h.CD_HOSPITAL = un.CD_HOSPITAL
        ORDER BY un.NM_UNIDADE, l.ID_LEITO
        ]]>
    </queryString>
    <field name="ID_LEITO" class="java.lang.String"/>
    <field name="NM_UNIDADE" class="java.lang.String"/>
    <field name="NM_HOSPITAL" class="java.lang.String"/>
    <field name="STATUS" class="java.lang.String"/>
    <title>
        <band height="50">
            <staticText>
                <reportElement x="0" y="10" width="555" height="30" uuid="12345678-1234-1234-1234-123456789020"/>
                <textElement textAlignment="Center">
                    <font size="18" isBold="true"/>
                </textElement>
                <text><![CDATA[Relatório de Ocupação de Leitos]]></text>
            </staticText>
        </band>
    </title>
    <columnHeader>
        <band height="30">
            <staticText>
                <reportElement x="0" y="0" width="100" height="20" uuid="12345678-1234-1234-1234-123456789021"/>
                <textElement><font isBold="true"/></textElement>
                <text><![CDATA[Leito]]></text>
            </staticText>
            <staticText>
                <reportElement x="100" y="0" width="200" height="20" uuid="12345678-1234-1234-1234-123456789022"/>
                <textElement><font isBold="true"/></textElement>
                <text><![CDATA[Unidade]]></text>
            </staticText>
            <staticText>
                <reportElement x="300" y="0" width="150" height="20" uuid="12345678-1234-1234-1234-123456789023"/>
                <textElement><font isBold="true"/></textElement>
                <text><![CDATA[Hospital]]></text>
            </staticText>
            <staticText>
                <reportElement x="450" y="0" width="100" height="20" uuid="12345678-1234-1234-1234-123456789024"/>
                <textElement><font isBold="true"/></textElement>
                <text><![CDATA[Status]]></text>
            </staticText>
        </band>
    </columnHeader>
    <detail>
        <band height="25">
            <textField>
                <reportElement x="0" y="0" width="100" height="20" uuid="12345678-1234-1234-1234-123456789025"/>
                <textFieldExpression><![CDATA[$F{ID_LEITO}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="100" y="0" width="200" height="20" uuid="12345678-1234-1234-1234-123456789026"/>
                <textFieldExpression><![CDATA[$F{NM_UNIDADE}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="300" y="0" width="150" height="20" uuid="12345678-1234-1234-1234-123456789027"/>
                <textFieldExpression><![CDATA[$F{NM_HOSPITAL}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="450" y="0" width="100" height="20" uuid="12345678-1234-1234-1234-123456789028"/>
                <textFieldExpression><![CDATA[$F{STATUS}]]></textFieldExpression>
            </textField>
            <line>
                <reportElement x="0" y="22" width="555" height="1" uuid="12345678-1234-1234-1234-123456789029"/>
                <graphicElement>
                    <pen lineWidth="0.5" lineColor="#CCCCCC"/>
                </graphicElement>
            </line>
        </band>
    </detail>
</jasperReport>
